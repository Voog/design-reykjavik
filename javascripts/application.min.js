var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var f,s,u,B,l,d;function v(){this.maxIterations=1e3,this.fractByPopulations=.75}return v.rshift=8-(v.sigbits=5),B=function(t,e,o){return(t<<2*v.sigbits)+(e<<v.sigbits)+o},f=function(){function t(t,e,o,n,i,r,s){this.r1=t,this.r2=e,this.g1=o,this.g2=n,this.b1=i,this.b2=r,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,o,n,i,r,s,a,c,h,u,l;if(!this._count_set||t){for(i=0,r=s=this.r1,h=this.r2;s<=h;r=s+=1)for(o=a=this.g1,u=this.g2;a<=u;o=a+=1)for(e=c=this.b1,l=this.b2;c<=l;e=c+=1)n=B(r,o,e),i+=this.histo[n]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,o,n,i,r,s,a,c,h,u,l,d,p,f,g,m;if(!this._average||t){for(a=1<<8-v.sigbits,o=i=h=u=0,c=l=this.r1,f=this.r2;l<=f;c=l+=1)for(n=d=this.g1,g=this.g2;d<=g;n=d+=1)for(e=p=this.b1,m=this.b2;p<=m;e=p+=1)s=B(c,n,e),u+=r=this.histo[s]||0,h+=r*(c+.5)*a,i+=r*(n+.5)*a,o+=r*(e+.5)*a;this._average=u?[~~(h/u),~~(i/u),~~(o/u)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,o,n;return n=t[0]>>v.rshift,o=t[1]>>v.rshift,e=t[2]>>v.rshift,this.r1<=n&&n<=this.r2&&this.g1<=o&&o<=this.g2&&this.b1<=e&&e<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),(n=e.count()*e.volume())<o?1:o<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,o,n;for(e=o=0,n=this.cboxes.size();o<n;e=o+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,o,n,i,r,s,a;for(r=function(t){return t*t},n=1e9,o=s=0,a=this.cboxes.size();s<a;o=s+=1)(e=Math.sqrt(r(t[0]-this.cboxes.peek(o).color[0])+r(t[1]-this.cboxes.peek(o).color[1])+r(t[2]-this.cboxes.peek(o).color[2])))<n&&(n=e,i=this.cboxes.peek(o).color);return i},t}(),l=function(t){var e,o,n,i,r,s,a,c;for(n=new Array(1<<3*v.sigbits),a=0,c=t.length;a<c;a++)s=(r=t[a])[0]>>v.rshift,o=r[1]>>v.rshift,e=r[2]>>v.rshift,n[i=B(s,o,e)]=(n[i]||0)+1;return n},u=function(t,e){var o,n,i,r,s,a,c,h,u,l,d,p;for(i=a=l=1e6,d=n=s=u=0,p=t.length;d<p;d++)(h=(c=t[d])[0]>>v.rshift)<l?l=h:u<h&&(u=h),(r=c[1]>>v.rshift)<a?a=r:s<r&&(s=r),(o=c[2]>>v.rshift)<i?i=o:n<o&&(n=o);return new f(l,u,a,s,i,n,e)},d=function(t,d){var e,o,n,i,r,p,s,f,a,c,h,g,u,l,m,v,b,y,w,C,x,_,j,k,A,M,P,z,I,T;if(d.count()){if(1===d.count())return[d.copy()];if(c=d.r2-d.r1+1,r=d.g2-d.g1+1,o=d.b2-d.b1+1,s=Math.max(c,r,o),g=0,f=[],p=[],s===c)for(a=u=d.r1,_=d.r2;u<=_;a=u+=1){for(h=0,i=l=d.g1,P=d.g2;l<=P;i=l+=1)for(e=m=d.b1,z=d.b2;m<=z;e=m+=1)h+=t[B(a,i,e)]||0;g+=h,f[a]=g}else if(s===r)for(i=v=d.g1,I=d.g2;v<=I;i=v+=1){for(h=0,a=b=d.r1,T=d.r2;b<=T;a=b+=1)for(e=y=d.b1,j=d.b2;y<=j;e=y+=1)h+=t[B(a,i,e)]||0;g+=h,f[i]=g}else for(e=w=d.b1,k=d.b2;w<=k;e=w+=1){for(h=0,a=C=d.r1,A=d.r2;C<=A;a=C+=1)for(i=x=d.g1,M=d.g2;x<=M;i=x+=1)h+=t[B(a,i,e)]||0;g+=h,f[e]=g}return f.forEach(function(t,e){return p[e]=g-t}),n=function(t){var e,o,n,i,r,s,a,c,h,u,l;for(s=t+"2",a=u=d[r=t+"1"],l=d[s];u<=l;a=u+=1)if(f[a]>g/2){for(e=d.copy(),o=d.copy(),i=(c=a-d[r])<=(h=d[s]-a)?Math.min(d[s]-1,~~(a+h/2)):Math.max(d[r],~~(a-1-c/2));!f[i];)i++;for(n=p[i];!n&&f[i-1];)n=p[--i];return e[s]=i,o[r]=e[s]+1,[e,o]}},s===c?n("r"):s===r?n("g"):s===o?n("b"):void 0}},v.prototype.quantize=function(t,e){var a,o,c,n,i,r,h=this;if(!t.length||e<2||256<e)return console.log("invalid arguments"),!1;for(c=l(t),a=u(t,c),(i=new PriorityQueue(function(t,e){var o,n;return o=t.count(),(n=e.count())<o?1:o<n?-1:0})).push(a),(n=function(t,e){var o,n,i,r,s;for(r=1,s=0;s<h.maxIterations;)if((a=t.pop()).count()){if(o=(i=d(c,a))[0],n=i[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(o),n&&(t.push(n),r++),e<=r)return;if(s++>h.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),s++})(i,this.fractByPopulations*e),r=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),(n=e.count()*e.volume())<o?1:o<n?-1:0});i.size();)r.push(i.pop());for(n(r,e-r.size()),o=new s;r.size();)o.push(r.pop());return o},v}.call(this),function(){window.ColorExtract=function(){function m(){}return m.getColorMap=function(t,e,o,n,i,r){var s,a,c,h,u,l,d,p,f,g;for(null==r&&(r=8),c=t.getContext("2d").getImageData(e,o,n,i).data,h=[],l=d=o,f=o+i;d<f;l=d+=1)for(a=l*n*4,u=p=e,g=e+n;p<g;u=p+=1)s=a+4*u,h.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(h,r)},m.colorDist=function(t,e){var o;return(o=function(t){return t*t})(t[0]-e[0])+o(t[1]-e[1])+o(t[2]-e[2])},m.extract=function(t,e,o){var n,i,r,s,a,c,h,u,l,d,p,f,g;for(e.width=25,e.height=25,e.getContext("2d").drawImage(t,0,0,e.width,e.height),(i=m.getColorMap(e,0,0,e.width,e.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),n=i[0].rgb,(h=m.getColorMap(e,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),d=u=0,f=h.length;d<f;d++)r=h[d],u<(s=m.colorDist(n,r.rgb))&&(u=s,a=r.rgb);for(p=u=0,g=h.length;p<g;p++)r=h[p],u<(s=m.colorDist(n,r.rgb))&&r.rgb!==a&&(u=s,c=r.rgb);return o({bgColor:(l=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:l(a),fgColor2:l(c)})},m}()}.call(this),function(a){var e=function(){return a("html").hasClass("editmode")};a(".langmenu-with-popup").each(function(){var e=a(this).find(".langmenu-popup");a(this).find(".langmenu-content").click(function(){return e.show(),a(document).bind("click",function(t){a.contains(e.get(0),t.target)||(e.hide(),a(this).unbind("click",arguments.callee))}),!1})}),a("a.news-older-show").click(function(){return a(this).addClass("no-bg"),a(".news-older-hidden").show(),!1}),a(".mobile-menu-arr").click(function(t){a(t.target).closest("li").toggleClass("open")});var t=function(){a(document).ready(function(){a(".comment-form").hasClass("form_with_errors")?a("html, body").scrollTop(a(".comment-form").offset().top):0<a("form").find(".form_error, .form_notice").length&&a("html, body").scrollTop(a(".form_error, .form_notice").closest("form").offset().top)})},n=function(t,e){return function(o,n){if(o&&n){"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),a.each(o,function(t,e){o[t]=+e})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),a.each(n,function(t,e){n[t]=+e})),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var t=[0,0,0,0];return t[3]=1-(1-n[3])*(1-o[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(n[0]*n[3]/t[3]+o[0]*o[3]*(1-n[3])/t[3],255),t[1]=Math.min(n[1]*n[3]/t[3]+o[1]*o[3]*(1-n[3])/t[3],255),t[2]=Math.min(n[2]*n[3]/t[3]+o[2]*o[3]*(1-n[3])/t[3],255),a.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],e||[255,255,255,1])},o=function(t){void 0!==t&&(.6<t?a("body").addClass("light-background").removeClass("dark-background"):a("body").addClass("dark-background").removeClass("light-background"))};getPhotoByWidth=function(t,e){for(var o,n,i=null,r=t.length;r--;)o=t[r].width-e,t[r].thumbnail&&"medium"===t[r].thumbnail||!(!i||n<0&&0<=o||(0<=n&&0<=o||n<0&&o<0)&&Math.abs(o)<Math.abs(n))||(i=t[r].url,n=o);return i},getPhotoByHeight=function(t,e){for(var o,n,i=null,r=t.length;r--;)o=t[r].height-e,t[r].thumbnail&&"medium"===t[r].thumbnail||!(!i||n<0&&0<=o||(0<=n&&0<=o||n<0&&o<0)&&Math.abs(o)<Math.abs(n))||(i=t[r].url,n=o);return i},a("html").on("click",".voog-search-modal",function(t){t.stopPropagation()}),a("html").click(function(){a(".js-popover").hasClass("expanded")&&a(".js-popover").removeClass("expanded"),a(".js-modal-overlay").hasClass("active")&&a(".js-modal-overlay").removeClass("active")});var i,r=function(){a(window).on("load",function(){s(),a(".content-body").children().length<1&&0===a(".content-body").text().trim().length&&a(".content-body").hide()}),a(window).on("resize",s),t()},s=function(){clearTimeout(i),i=setTimeout(function(){var t=parseInt(a(".content-left .content-header").parent().css("height")),e=parseFloat(a(".content-right").css("padding-top"));t+=parseInt(a(".content-left .news").parent().css("height")),a(".content-right").css("min-height",t-2*e),a(".frontpage-cover-image").removeClass("hidden"),a(".frontpage-cover-color").removeClass("hidden")},200)};a(".js-search-btn").click(function(t){t.stopPropagation(),a(this).toggleClass("open"),a(".js-search").toggleClass("active"),a(".js-modal-overlay").hasClass("active")&&a(".js-search-input").focus()}),a(".js-modal-overlay").on("click","form",function(t){t.stopPropagation()});var c,h,u=function(t,e,o){var n=t.find(".js-content-item-img-drop-area"),i=t.find(".js-toggle-crop-state");o<e?n.removeClass("image-landscape image-square image-portrait").addClass("image-landscape"):e===o?n.removeClass("image-landscape image-square image-portrait").addClass("image-square"):n.removeClass("image-landscape image-square image-portrait").addClass("image-portrait"),n.hasClass("image-square")?i.removeClass("is-visible").addClass("is-hidden"):i.removeClass("is-hidden").addClass("is-visible")},l=function(e,o,t,n,i){var r="article"===i?"articles":"pages",s=new Edicy.CustomData({type:i,id:t});a.ajax({type:"PATCH",contentType:"application/json",url:"/admin/api/"+r+"/"+t,data:JSON.stringify({image_id:n}),dataType:"json",success:function(t){s.set("image_crop_state","not-cropped"),e.removeClass("not-loaded with-error").addClass("is-loaded"),e.find(".edy-img-drop-area-placeholder").css("opacity",1),o.css("opacity",1)},timeout:3e4,error:function(t){e.removeClass("not-loaded is-loaded with-error").addClass("with-error")}})},d=function(){a(document).ready(function(){setTimeout(function(){a(".js-content-item-box").addClass("not-loaded")},3e3)}),a(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var t=a(this).closest(".js-content-item-box");t.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){t.removeClass("not-loaded with-error"),t.find(".js-loader").remove()},3e3)}})};e=function(){return a("html").hasClass("editmode")};window.site=a.extend(window.site||{},{initBlogPage:function(){},initArticlePage:function(){t()},initCommonPage:function(){t()},initFrontPage:r,initItemsPage:function(){e()||d()},handleColorScheme:o,handleProductPageContent:function(){var n,i,r,s;a(document).ready(function(){t()}),a(window).resize((n=function(){t()},i=25,function(){var t=this,e=arguments,o=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||n.apply(t,e)},i),o&&n.apply(t,e)}));var t=function(){var t=a(".js-product-gallery"),e=a(".js-content-item-box"),o=a(".js-product-content-right");1<=a(".js-buy-btn-content .edy-buy-button-container").length&&(a(window).width()<640?0===a(".js-buy-btn-content + .js-product-gallery").length&&o.append(t):0===a(".js-content-item-box + .js-product-gallery").length&&e.parent().append(t))}},handleProductImageClick:function(t){e()&&a(".product-content .product-image").click(function(){window.open("/admin/ecommerce/products/"+t,"_blank").focus()})},getCombinedLightness:function(t,e){var o=n(t,e);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},handleHeaderColorScheme:function(t){void 0!==t&&(.6<t?a(".header-wrapper").addClass("light").removeClass("dark"):a(".header-wrapper").addClass("dark").removeClass("light"))},getPhotoByWidth:getPhotoByWidth,getPhotoByHeight:getPhotoByHeight,bindCustomTexteditorStyles:function(t){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:t,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])},bindRootItemSettings:function(o){"show_product_related_pages_in_main_menu"in o||(o.show_product_related_pages_in_main_menu=!1),a(".js-root-item-settings-toggle").each(function(t,e){new Edicy.SettingsEditor(e,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:o,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(t){1==!t.show_product_related_pages_in_main_menu?a(".js-menu-item-products").addClass("is-hidden"):a(".js-menu-item-products").removeClass("is-hidden")},commit:function(t){siteData.set("settings_root_item",t)}})})},bindContentItemImgDropAreas:function(s){a(".js-content-item-img-drop-area").each(function(t,e){var o=a(e),n=o.closest(".js-content-item-box"),i=n.data("item-id"),r=n.data("item-type");new Edicy.CustomData({type:r,id:i}),new Edicy.ImgDropArea(o,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+s+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(t){var e;o.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),t?(e=t.original_id,n.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),u(n,t.width,t.height)):(e=null,n.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),n.find(".edy-img-drop-area-placeholder").css("opacity",0)),l(n,o,i,e,r)}})})},bindContentItemImageCropToggle:function(){a(".js-toggle-crop-state").on("click",function(){var t,e=a(this).closest(".js-content-item-box"),o=e.find(".js-content-item-img-drop-area"),n=e.data("item-id"),i=e.data("item-type"),r=new Edicy.CustomData({type:i,id:n});t=o.hasClass("is-cropped")?(o.removeClass("is-cropped").addClass("not-cropped"),"not-cropped"):(o.removeClass("not-cropped").addClass("is-cropped"),"is-cropped"),r.set("image_crop_state",t)})},bindSiteSearch:function(t,e,o){t&&new VoogSearch(t,{per_page:10,lang:e,resultsContainer:a(".js-voog-search-modal").get(0),sideclick:!0,mobileModeWidth:752,updateOnKeypress:!0,noResults:o})}}),a(".menu-lang").find(".menu").change(function(){var t=a(this).find(":selected");window.location=t.val(),a(this).prev().text(t.text())}),a(".mobile-menu-btn").click(function(){a(this).toggleClass("open"),a(".mobile-menu-main").toggleClass("expanded")}),o(),a("html").click(function(){a(".mobile-lang-menu-popover").hasClass("expanded")&&a(".mobile-lang-menu-popover").removeClass("expanded")}),r(),e()||a(".content-formatted table").wrap('<div class="table-container overthrow"></div>'),a(".search-input").on("keyup",function(t){$input=a(t.target),27!=t.keyCode&&$input.val()&&($input.parent().find(".search-submit").hide(),$input.parent().find(".search-clear").show())}),a(".search-form").on("click",".search-clear",function(t){var e=a(t.target).closest(".search-form");e.removeClass("not-empty").find(".search-input").focus().val(""),a(t.target).hide(),a(".voog-search-modal").removeClass("search-results-active"),e.find(".search-submit").show(),e.find("input").blur()}),a(window).on("resize",function(){752<a(window).innerWidth()&&(a(".mobile-menu-btn").removeClass("open"),a(".mobile-menu-main").removeClass("expanded"))}),!Modernizr.flexbox&&e()&&(c=a(".js-header").width(),h=a(".js-header-right").width(),a(".js-header-left").css("min-width",c-h))}(jQuery);